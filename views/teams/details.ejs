<% layout('layouts/boilerplate') %>
<div class="row">
  <div class="col-md-7">
    <h3 class="title">Club Information</h3>
    <div class="card mb-4 club-info box-shadow-rounded">
      <div class="row g-0">
        <div class="col-md-3">
          <div class="d-flex">
            <img
              src="<%= team.logo %>"
              class="img-fluid rounded-start p-4"
              alt="Image of <%= team.name %>"
            />
          </div>
        </div>
        <div class="col-md-9 d-flex flex-column justify-content-center">
          <div class="card-body d-flex flex-column justify-content-center">
            <h5 class="card-title"><%= team.name %></h5>
            <p class="card-text">Abbreviation: <%= team.code %></p>
            <p class="card-text">Year Founded: <%= team.founded %></p>
            <div class="d-flex align-items-center">
              <p class="card-title me-1">Country:</p>
              <img class="rounded team-flag" src="<%= team.flag %>" alt="" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <h3 class="title">Coaches</h3>
    <table class="table box-shadow-rounded" id="coach-table">
      <thead>
        <tr>
          <th class="text-center" scope="col">Photo</th>
          <th class="text-center" scope="col">Coach Details</th>
        </tr>
      </thead>
      <tbody>
        <% for (let coach of team.coaches) { %>
        <tr>
          <td>
            <img
              src="<%= coach.photo %>"
              class="img-fluid"
              alt="Image of <%= `${coach.firstname} ${coach.lastname}`%>"
            />
          </td>
          <td colspan="2">
            <div class="coach-details">
              <h5 class="card-title"><%= `${coach.firstname} ${coach.lastname}` %></h5>
              <p class="card-text">Age: <%= coach.age %></p>
              <p class="card-text">Nationality: <%= coach.nationality %></p>
            </div>
          </td>
        </tr>
        <% } %>
      </tbody>
    </table>
  </div>
  <div class="col-md-5">
    <h3 class="title">Homeground</h3>
    <div class="card box-shadow-rounded">
      <img
        src="<%= team.venue.image %>"
        class="card-img-top"
        alt="Image of <%= team.venue.name %>"
      />
      <div class="card-body">
        <h5 class="card-title"><%= team.venue.name %></h5>
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">City: <%= team.venue.city %></li>
        <li class="list-group-item">Capacity: <%= team.venue.capacity %></li>
        <li class="list-group-item">Address: <%= team.venue.address %></li>
      </ul>
    </div>
  </div>
</div>

<div class="row">
  <h2 class="mt-3 title">Squad</h2>
  <div class="accordion mb-3" id="accordionPanelsStayOpenExample">
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button
          class="accordion-button"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#panelsStayOpen-collapseOne"
          aria-expanded="true"
          aria-controls="panelsStayOpen-collapseOne"
        >
          Goalkeepers
        </button>
      </h2>
      <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
        <div class="accordion-body">
          <div class="row row-cols-2 row-cols-md-5">
            <% for(player of team.squad) { %> <% if (player.position === 'Goalkeeper') { %>
            <div class="col">
              <div class="card mb-3 box-shadow-rounded" style="width: 200px">
                <img
                  src="<%= player.photo %>"
                  class="card-img-top py-2"
                  alt="Image of <%= player.name %>"
                />
                <div class="card-body">
                  <h6 class="card-title text-center"><%= player.name %></h6>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    Squad Number: <%= player.number? player.number : 'N/A' %>
                  </li>
                  <li class="list-group-item">Age: <%= player.age %></li>
                </ul>
              </div>
            </div>
            <% } %> <% } %>
          </div>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button
          class="accordion-button collapsed"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#panelsStayOpen-collapseTwo"
          aria-expanded="false"
          aria-controls="panelsStayOpen-collapseTwo"
        >
          Defenders
        </button>
      </h2>
      <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
        <div class="accordion-body">
          <div class="row row-cols-2 row-cols-md-5 d-flex">
            <% for(player of team.squad) { %> <% if (player.position === 'Defender') { %>
            <div class="col">
              <div class="card mb-3 box-shadow-rounded" style="width: 200px">
                <img
                  src="<%= player.photo %>"
                  class="card-img-top py-2"
                  alt="Image of <%= player.name %>"
                />
                <div class="card-body">
                  <h6 class="card-title text-center"><%= player.name %></h6>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    Squad Number: <%= player.number? player.number : 'N/A' %>
                  </li>
                  <li class="list-group-item">Age: <%= player.age %></li>
                </ul>
              </div>
            </div>
            <% } %> <% } %>
          </div>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button
          class="accordion-button collapsed"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#panelsStayOpen-collapseThree"
          aria-expanded="false"
          aria-controls="panelsStayOpen-collapseThree"
        >
          Midfielders
        </button>
      </h2>
      <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
        <div class="accordion-body">
          <div class="row row-cols-2 row-cols-md-5">
            <% for(player of team.squad) { %> <% if (player.position === 'Midfielder') { %>
            <div class="col">
              <div class="card mb-3 box-shadow-rounded" style="width: 200px">
                <img
                  src="<%= player.photo %>"
                  class="card-img-top py-2"
                  alt="Image of <%= player.name %>"
                />
                <div class="card-body">
                  <h6 class="card-title text-center"><%= player.name %></h6>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    Squad Number: <%= player.number? player.number : 'N/A' %>
                  </li>
                  <li class="list-group-item">Age: <%= player.age %></li>
                </ul>
              </div>
            </div>
            <% } %> <% } %>
          </div>
        </div>
      </div>
    </div>
    <div class="accordion-item">
      <h2 class="accordion-header">
        <button
          class="accordion-button collapsed"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#panelsStayOpen-collapseFour"
          aria-expanded="false"
          aria-controls="panelsStayOpen-collapseFour"
        >
          Forwards
        </button>
      </h2>
      <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse">
        <div class="accordion-body">
          <div class="row row-cols-2 row-cols-md-5 d-flex">
            <% for(player of team.squad) { %> <% if (player.position === 'Attacker') { %>
            <div class="col">
              <div class="card mb-3 box-shadow-rounded" style="width: 200px">
                <img
                  src="<%= player.photo %>"
                  class="card-img-top py-2"
                  alt="Image of <%= player.name %>"
                />
                <div class="card-body">
                  <h6 class="card-title text-center"><%= player.name %></h6>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    Squad Number: <%= player.number? player.number : 'N/A' %>
                  </li>
                  <li class="list-group-item">Age: <%= player.age %></li>
                </ul>
              </div>
            </div>
            <% } %> <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
